<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="java.js"></script>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="style.css">
    <title>WEBMAPPING - Chloé Morgat</title>
</head>

<body>
    <!----------- SECTION COUVERTURE ----------->
<section id="banner">
    <img src="img/logo/ensat.png" class="logo1">
    <img src="img/logo/sigma.jpeg" class="logo2">
    <img src="img/logo/ut2j.png" class="logo3">
    <div class="banner-text">
      <h1> CLASSIFICATION DES ESSENCES FORESTIERES </h1>
      <h2>Projet WEBMAPPING - UE 902_1 - MASTER 2 SIGMA</h2>
    </div>
</section>
    <div id="map"></div>
    <div class="description hide" id="description">
      <h2> CLASSIFICATION DES ESSENCES FORESTIERES</h2> 
      <h3>autour de Toulouse</h3>
      <div>Notre cas d’étude se focalise sur la commune de Toulouse et ses alentours. L’objectif
        est de déterminer si l’inventaire forestier de la base de données IGN peut être utilisée
        comme source d’échantillons de référence pour réaliser une classification supervisée de séries
        temporelles d’images Sentinel 2. En effet, la BDForêt constitue le référentiel géographique de
        composition et de distribution spatiale des essences forestières sur le territoire national. Toutefois,
        c’est une base de données peu mise à jour (la dernière remonte à 2016) et ne permet pas de
        cartographier les essences forestières à une échelle intra-peuplement. 
      </div>
      <div>Pour ce projet de WEBMAPPING, la classification avec la nomenclature de niveau trois a été sélectionnée.</div>
        <div class="image-nom">
            <img src="img/nomenclature.png" alt="Nomenclature">
            <div class="overlay"></div>
        </div>
        <div class="image-leg">FIGURE 1. Correspondance entre les classes de la BD Forêt et les nomenclatures des cartes à obtenir.</div>
        <div class="image-mc">
            <img src="img/matrice_confusion.jpg" alt="Matrice de confusion">
            <div class="overlay"> La matrice de confusion montre une meilleure performance sur la classification de la classe 102 
              « Chêne pur » avec une fort nombre de pixels correctement classés. Les classes « Autres feuillus pur» et 
              « Pin laricio ou pin noir pur» ont des performances beaucoup plus faibles : inférieur à 20 ; quant aux autres classes 
              (« Robinier pur»,« Mélange de feuillus»,« Peupleraie»,« Autres conifères purs autre que pin », « Douglas pur», 
              « Mélange de conifères autres que pin », « Autre Pin pur», « Mélange Pins» et « Mélange Pins et autres conifères »), le
              F1-score est très faible : inférieur à 10.
              Notons que la classe 102 est régulièrement confondus avec les classes 103, 104 et 110, ce qui peut
              s'expliquer facilement par le fait que ce sont toutes des classes de feuillus et ainsi que les ressemblances sont importantes. 
              La principale confusion se fait entre la classe 102 « Chênes purs» et la « Mélange de feuillus ». 
              </div>
        </div>
        <div class="image-leg">FIGURE 2. Matrice de confusion.</div>
        <div class="pdf">
          <a href="projet_teledection_sigmaM2_group1.pdf" download="projet_teledection_sigmaM2_group1.pdf">Télécharger le rapport du projet de télédetection ICI</a>
        </div>
        <div class="droit">
          © Chloé Morgat        
        </div>
      </div>
    
    <!-- Bouton pour afficher/masquer la description -->
    <div class="toggle-descrip" onclick="toggleLegend()">Afficher/Masquer la description</div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
    <script src="https://unpkg.com/leaflet-switch-layers/dist/leaflet-switch-layers.js"></script>
    <script src="https://unpkg.com/leaflet-minimap/dist/Control.MiniMap.min.js"></script>
    
    <!----------- SECTION CARTES ----------->
    <script>
    // Toulouse coordinates
    var map = L.map('map').setView([43.6000, 1.4333], 10); 

    // Ajouter des fonds de carte
    var baseMaps = {
      ESRI: L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}',{
        attribution: 'ESRI, Kanto ANDRIANNARIVONY - Alizée GERMAIN - Chloé MORGAT - Anne-Sophie PINNA'}),
      Topo : L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}',{
        attribution: 'ESRI, Kanto ANDRIANNARIVONY - Alizée GERMAIN - Chloé MORGAT - Anne-Sophie PINNA'}),
      OSM: L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png',{
        attribution: 'OSM, Kanto ANDRIANNARIVONY - Alizée GERMAIN - Chloé MORGAT - Anne-Sophie PINNA'})};
      baseMaps.ESRI.addTo(map);

    // Ajouter l'echelle cartographique
    L.control.scale().addTo(map);
    
    // Ajout du flux geoserver : raster classification des essences forestières
    var overlayMap = {
        'Classification': L.tileLayer.wms('https://geotests.net/geoserver/cmorgat/wms', {
            layers: 'cmorgat:carte_essences_lvl3',
            format: 'image/png',
            transparent: true
        })
    };
     overlayMap['Classification'].addTo(map);
    
    // Ajout d'une mini carte
    var miniMap = new L.Control.MiniMap(
      L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution: 'Leaflet'}), 
      {toggleDisplay: true }
      );
    
    miniMap.addTo(map);
    miniMap._container.style.border = '1px solid black'; 

    L.control.layers(baseMaps, overlayMap).addTo(map);

    
    function toggleLegend() {
      var legend = document.getElementById('description');
      legend.classList.toggle('hide'); 
    }
  
    // Ajout d'une légende
    function addLegend(map) {
      var legend = L.control({ position: 'bottomright' });

      legend.onAdd = function () {
          var div = L.DomUtil.create('div', 'legend');
          div.innerHTML += '<span class="legend-color AFP"></span> Autres feuillus pur<br>';
          div.innerHTML += '<span class="legend-color CP"></span> Chêne pur<br>';
          div.innerHTML += '<span class="legend-color RP"></span> Robinier pur<br>';
          div.innerHTML += '<span class="legend-color MF"></span> Mélange de feuillus<br>';
          div.innerHTML += '<span class="legend-color P"></span> Peupleraie<br>';
          div.innerHTML += '<span class="legend-color ACPAP"></span> Autres conifères purs autre que pin<br>';
          div.innerHTML += '<span class="legend-color DP"></span> Douglas pur<br>';
          div.innerHTML += '<span class="legend-color PLPNP"></span> Pin laricio ou pin noir pur<br>';
          div.innerHTML += '<span class="legend-color APP"></span> Autre pin pur<br>';
          div.innerHTML += '<span class="legend-color MPAC"></span> Mélange Pins et autres conifères<br>';
          return div;
        };
      legend.addTo(map);
    }
  
    addLegend(map);
    </script>
</body>
</html>
